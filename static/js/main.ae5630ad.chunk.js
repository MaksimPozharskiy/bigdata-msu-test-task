(this["webpackJsonpbigdata-msu-test-task"]=this["webpackJsonpbigdata-msu-test-task"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(15),c=n.n(i),l=(n(23),n(7)),o=(n(24),n(25),n(0));var r=function(){return Object(o.jsx)("div",{className:"header",children:Object(o.jsx)("h1",{className:"header__title",children:"BigData MSU Movies"})})};n(27),n(41),n(30);var u=function(e){for(var t=e.moviesPerPage,n=e.totalMovies,s=e.paginate,a=[],i=1;i<=Math.ceil(n/t);i++)a.push(i);return Object(o.jsx)("div",{className:"pagination",children:Object(o.jsx)("ul",{className:"pagination__list",children:a.map((function(e){return Object(o.jsx)("li",{className:"pagination__list-item",children:Object(o.jsx)("button",{onClick:function(){return s(e)},className:"pagination__number",children:e})},e)}))})})},m=a.a.lazy((function(){return Promise.resolve().then(n.bind(null,41))})),d=a.a.lazy((function(){return n.e(3).then(n.bind(null,43))}));var b=function(e){var t=e.movies,n=e.setIsVisiblePopup,i=e.setCurrentIdMovie,c=e.hadleDeleteCommentButton,r=a.a.useState(1),b=Object(l.a)(r,2),j=b[0],h=b[1],p=a.a.useState(4),v=Object(l.a)(p,1)[0],_=a.a.useState(document.documentElement.clientWidth),x=Object(l.a)(_,1)[0],O=j*v,f=O-v,g=t.slice(f,O);function C(e){n(!0),i(e)}return Object(o.jsx)("div",{className:"main",children:Object(o.jsxs)(s.Suspense,{fallback:Object(o.jsx)("div",{children:"Waiting..."}),children:[x>=768?Object(o.jsx)(m,{movies:g,setIsVisiblePopup:n,setCurrentIdMovie:i,hadleDeleteCommentButton:c,hadleAddCommentButton:C}):g.map((function(e){return Object(o.jsx)(d,{id:e.id,urlPoster:e.medium_cover_image,title:e.title,year:e.year,rating:e.rating,runtime:e.runtime,comment:e.comment,setIsVisiblePopup:n,setCurrentIdMovie:i,hadleDeleteCommentButton:c,hadleAddCommentButton:C},e.id)})),Object(o.jsx)(u,{moviesPerPage:v,totalMovies:t.length,paginate:function(e){h(e)}})]})})},j=n(16),h=n(17),p=new(function(){function e(t){var n=t.baseUrl,s=t.headers;Object(j.a)(this,e),this._baseUrl=n,this._headers=s}return Object(h.a)(e,[{key:"getMovies",value:function(){var e=this;return fetch("".concat(this._baseUrl),{headers:this._headers}).then((function(t){return e._checkRequestResult(t)}))}},{key:"_checkRequestResult",value:function(e){return e.ok?e.json():Promise.reject("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({baseUrl:"https://yts.mx/api/v2/list_movies.json",headers:{}});n(31);var v=function(e){var t=e.isVisiblePopup,n=e.setIsVisiblePopup,s=e.valueComment,a=e.setValueComment,i=e.handleSubmit,c=e.currentIdMovie;return Object(o.jsxs)("div",{className:"popup ".concat(t?"popup_visibility":""),children:[Object(o.jsxs)("form",{onSubmit:function(e){i(e,c)},className:"popup__form",children:[Object(o.jsx)("label",{className:"popup__title",htmlFor:"comment",children:"New comment"}),Object(o.jsx)("textarea",{id:"comment",className:"popup__input",value:s,onChange:function(e){a(e.target.value)}}),Object(o.jsx)("button",{className:"popup__submit",type:"submit",children:"Save comment"})]}),Object(o.jsx)("div",{onClick:function(){n(!1),a("")},className:"popup__close"})]})},_=n(2);var x=function(){var e=a.a.useState([]),t=Object(l.a)(e,2),n=t[0],s=t[1],i=a.a.useState(!1),c=Object(l.a)(i,2),u=c[0],m=c[1],d=a.a.useState(""),j=Object(l.a)(d,2),h=j[0],x=j[1],O=a.a.useState(0),f=Object(l.a)(O,2),g=f[0],C=f[1];return a.a.useEffect((function(){p.getMovies().then((function(e){e.data.movies.forEach((function(e){e.comment=""})),s(e.data.movies)}))}),[]),Object(o.jsxs)(_.a,{exact:!0,path:"/",children:[Object(o.jsxs)("div",{className:"page",children:[Object(o.jsx)(r,{}),Object(o.jsx)(b,{movies:n,setIsVisiblePopup:m,setCurrentIdMovie:C,hadleDeleteCommentButton:function(e){s(n.map((function(t){return t.id===e?(t.comment="",t):t})))}})]}),Object(o.jsx)(v,{isVisiblePopup:u,setIsVisiblePopup:m,valueComment:h,setValueComment:x,handleSubmit:function(e,t){e.preventDefault(),s(n.map((function(e){return e.id===t?(e.comment=h,e):e}))),x(""),m(!1)},currentIdMovie:g})]})},O=n(12);c.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(O.a,{children:Object(o.jsx)(x,{})})}),document.getElementById("root"))},41:function(e,t,n){"use strict";n.r(t);n(28),n(1),n(29);var s=n(0);var a=function(e){var t=e.id,n=e.urlPoster,a=e.title,i=e.year,c=e.rating,l=e.runtime,o=e.defaultComment,r=(e.setIsVisiblePopup,e.comment),u=(e.setCurrentIdMovie,e.hadleDeleteCommentButton),m=e.hadleAddCommentButton;return Object(s.jsxs)("tr",{className:"table__body-row",children:[Object(s.jsx)("td",{className:"table__body-cell",children:t}),Object(s.jsx)("td",{className:"table__body-cell",children:"poster"===n?"poster":Object(s.jsx)("img",{className:"table__poster",src:n,alt:a})}),Object(s.jsx)("td",{className:"table__body-cell",children:a}),Object(s.jsx)("td",{className:"table__body-cell",children:i}),Object(s.jsx)("td",{className:"table__body-cell",children:c}),Object(s.jsx)("td",{className:"table__body-cell",children:l}),Object(s.jsx)("td",{className:"table__body-cell table__body-cell_type_comment",children:o?"comment":Object(s.jsxs)(s.Fragment,{children:[r.length>0?Object(s.jsxs)("svg",{onClick:function(){return u(t)},className:"table__icon table__icon_delete",xmlns:"http://www.w3.org/2000/svg",height:"40px",viewBox:"0 0 24 24",width:"40px",fill:"#000000",children:[Object(s.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(s.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})]}):Object(s.jsxs)("svg",{onClick:function(){return m(t)},className:"table__icon table__icon_add",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"40px",viewBox:"0 0 24 24",width:"40px",fill:"#000000",children:[Object(s.jsx)("g",{children:Object(s.jsx)("rect",{fill:"none",height:"24",width:"24"})}),Object(s.jsx)("g",{children:Object(s.jsx)("g",{children:Object(s.jsx)("path",{d:"M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"})})})]}),Object(s.jsx)("p",{className:"table__comment",children:r})]})})]})};t.default=function(e){var t=e.movies,n=e.setIsVisiblePopup,i=e.setCurrentIdMovie,c=e.hadleDeleteCommentButton,l=e.hadleAddCommentButton;return Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{className:"table__head",children:Object(s.jsx)(a,{id:"id",urlPoster:"poster",title:"title",year:"year",rating:"rating",runtime:"runtime",defaultComment:"comment"})}),Object(s.jsx)("tbody",{className:"table__body",children:t.map((function(e){return Object(s.jsx)(a,{id:e.id,urlPoster:e.medium_cover_image,title:e.title,year:e.year,rating:e.rating,runtime:e.runtime,comment:e.comment,setIsVisiblePopup:n,setCurrentIdMovie:i,hadleDeleteCommentButton:c,hadleAddCommentButton:l},e.id)}))})]})}}},[[40,1,2]]]);
//# sourceMappingURL=main.ae5630ad.chunk.js.map